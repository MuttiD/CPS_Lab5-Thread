http://os.mbed.com/users/co657_frmb/code/C12832/#7accdf0bfc18b9f8e41e95d81f1cb468101c9b63